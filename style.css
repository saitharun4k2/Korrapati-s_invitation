/* --- Color Palette & Variables --- */
:root {
    --body-bg: #fdfaf0; /* Lightest background */
    --card-bg: #fffbf5; /* Card background, slightly off-white */
    --primary-red: #A52A2A; /* Deep traditional red */
    --accent-gold: #FFD700; /* Gold for highlights */
    --text-dark: #333; /* Dark text for readability */
    --text-medium: #666; /* Medium text for secondary info */
    --envelope-color: #f7e7ce; /* Light cream for envelope */
}

/* --- Global Styles & Body --- */
body {
    margin: 0;
    font-family: 'Noto Sans Telugu', serif;
    background-color: var(--body-bg);
    color: var(--text-dark);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 15px;
    box-sizing: border-box;
    overflow: hidden; /* Prevent scroll issues with fixed elements */
    position: relative;
}

/* --- Fixed Background Pattern (mimicking the image's overall pattern) --- */
#background-pattern {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -2; /* Below envelope and card */
    background-color: var(--body-bg);
    background-image: radial-gradient(var(--accent-gold) 1px, transparent 1px),
                      radial-gradient(var(--accent-gold) 1px, transparent 1px);
    background-size: 20px 20px;
    background-position: 0 0, 10px 10px;
    opacity: 0.1; /* Subtle pattern */
}

/* --- Envelope Animation Wrapper --- */
.envelope-wrapper {
    position: relative;
    width: 95vw;
    max-width: 450px; /* Slightly wider for the new design */
    aspect-ratio: 9 / 14; /* Taller aspect ratio for invitation style */
    max-height: 90vh;
    cursor: pointer;
    perspective: 1500px;
}

/* --- Envelope Parts (Front, Back, Flap) --- */
.envelope-front, .envelope-back, .flap {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    border-radius: 10px;
    background-color: var(--envelope-color);
    box-shadow: 0 8px 30px rgba(0,0,0,0.2);
    transform-style: preserve-3d;
}

.envelope-front {
    z-index: 4;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    transition: opacity 0.8s ease 0.5s; /* Longer delay for envelope to vanish */
}

.envelope-wrapper.open .envelope-front {
    opacity: 0;
    pointer-events: none;
}

.flap {
    z-index: 3;
    transform-origin: top;
    clip-path: polygon(0 0, 100% 0, 50% 40%);
    transition: transform 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.5s; /* Delay to match front fade */
}

.envelope-wrapper.open .flap {
    transform: rotateX(180deg);
}

.envelope-back {
    z-index: 1;
}

/* --- Front of Envelope Content --- */
.stamp {
    width: 70px;
    height: 70px;
    background: var(--primary-red);
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    color: var(--card-bg);
    font-size: 30px;
    box-shadow: inset 0 0 15px rgba(0,0,0,0.3);
}

.front-text {
    text-align: center;
    color: var(--primary-red);
    margin-top: 20px;
}

.front-text .main-heading {
    font-family: 'Great Vibes', cursive;
    font-size: clamp(2.5rem, 10vw, 3.5rem);
    margin: 0;
}

.front-text p {
    font-style: italic;
    opacity: 0.8;
    font-size: 1rem;
    margin-top: 5px;
}

/* --- Main Invitation Card --- */
.card {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: 2;
    transform: translateY(100%) scale(0.9);
    transition: transform 1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.2s; /* Longer delay to follow envelope */
    background: var(--card-bg);
    border-radius: 10px;
    overflow: hidden; /* Hide overflowing pseudo-elements */
    box-shadow: 0 8px 30px rgba(0,0,0,0.2);
    display: flex; /* Use flex to control content */
    flex-direction: column;
    justify-content: space-between; /* Push content to top/bottom */
    align-items: center;
    padding: 20px 0; /* Padding for the card content */
    box-sizing: border-box;
    position: relative; /* For pseudo-elements positioning */
}

.envelope-wrapper.open .card {
    transform: translateY(0) scale(1);
}

/* --- Card Background Pillars & Flowers (CSS Art) --- */
.card::before, .card::after {
    content: '';
    position: absolute;
    width: 15%; /* Width of the pillar */
    height: 90%; /* Height of the pillar */
    background: 
        linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 50%, #d0d0d0 100%) padding-box,
        linear-gradient(to right, var(--accent-gold), var(--accent-gold)) border-box;
    border: 5px solid transparent;
    border-radius: 10px;
    bottom: 0; /* Align to the bottom */
    z-index: -1; /* Behind content */
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    background-origin: border-box;
    background-clip: padding-box, border-box;
}

.card::before { left: -5%; transform: translateX(-50%); } /* Left pillar */
.card::after { right: -5%; transform: translateX(50%); } /* Right pillar */

/* Add flower effect to pillars (simplified) */
.card::before {
    background-image: 
        linear-gradient(to bottom, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.0) 20%), /* Top fade for flowers */
        linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 50%, #d0d0d0 100%) padding-box,
        linear-gradient(to right, var(--accent-gold), var(--accent-gold)) border-box;
    background-position: center top;
    background-size: 100% 50%, 100% 100%, 100% 100%;
    background-repeat: no-repeat;
    /* Simulate flowers - simplified circles/blobs */
    mask-image: radial-gradient(circle 10px at 20% 10%, black 100%, transparent 0),
                radial-gradient(circle 12px at 80% 15%, black 100%, transparent 0),
                radial-gradient(circle 8px at 30% 25%, black 100%, transparent 0),
                linear-gradient(to top, black 30%, transparent 70%); /* Main pillar shape */
    mask-composite: exclude;
    -webkit-mask-composite: exclude; /* For webkit browsers */
}

.card::after {
    background-image: 
        linear-gradient(to bottom, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.0) 20%), /* Top fade for flowers */
        linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 50%, #d0d0d0 100%) padding-box,
        linear-gradient(to right, var(--accent-gold), var(--accent-gold)) border-box;
    background-position: center top;
    background-size: 100% 50%, 100% 100%, 100% 100%;
    background-repeat: no-repeat;
    mask-image: radial-gradient(circle 10px at 20% 10%, black 100%, transparent 0),
                radial-gradient(circle 12px at 80% 15%, black 100%, transparent 0),
                radial-gradient(circle 8px at 30% 25%, black 100%, transparent 0),
                linear-gradient(to top, black 30%, transparent 70%); /* Main pillar shape */
    mask-composite: exclude;
    -webkit-mask-composite: exclude;
}

/* --- Card Content --- */
.card-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    width: 90%; /* Constrain content width */
    max-height: calc(100% - 40px); /* Account for card padding */
    overflow-y: auto; /* Enable scrolling for content if it overflows */
    padding: 10px; /* Internal padding for content */
    box-sizing: border-box;
}

/* --- Card Reveal Animation for Content --- */
.card-content > * {
    opacity: 0;
    transform: translateY(20px);
}

.envelope-wrapper.content-visible .card-content > * {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 0.6s ease, transform 0.6s ease;
}

.envelope-wrapper.content-visible .ganesha-top-icon { transition-delay: 0.2s; }
.envelope-wrapper.content-visible .main-card-header .main-heading { transition-delay: 0.4s; }
.envelope-wrapper.content-visible .intro-text { transition-delay: 0.6s; }
.envelope-wrapper.content-visible .daughter-name { transition-delay: 0.8s; }
.envelope-wrapper.content-visible .invitation-plea { transition-delay: 1.0s; }
.envelope-wrapper.content-visible .details-grid { transition-delay: 1.2s; }
.envelope-wrapper.content-visible .hosts-section { transition-delay: 1.4s; }


/* --- Specific Content Styles --- */
.ganesha-top-icon {
    font-size: 3.5rem;
    color: var(--primary-red);
    margin-bottom: 20px;
    background: linear-gradient(45deg, var(--accent-gold), var(--primary-red));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
}

.main-heading {
    color: var(--primary-red);
    font-size: clamp(1.8rem, 7vw, 2.8rem);
    margin: 0;
    font-weight: 700;
}

.daughter-name {
    font-family: 'Great Vibes', cursive;
    color: var(--accent-gold);
    font-size: clamp(2.5rem, 10vw, 3.8rem);
    margin: 10px 0;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
}

.intro-text, .invitation-plea {
    font-size: clamp(0.95rem, 3.5vw, 1.15rem);
    line-height: 1.7;
    margin: 8px 0;
    color: var(--text-medium);
}

.invitation-plea {
    font-style: italic;
    margin-top: 25px;
    margin-bottom: 30px;
}

/* --- Details Grid --- */
.details-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 15px;
    width: 95%;
    margin: 25px 0;
    padding: 15px 0;
    border-top: 1px dashed var(--accent-gold);
    border-bottom: 1px dashed var(--accent-gold);
    color: var(--text-dark);
}

.detail-item {
    flex: 1;
    min-width: 140px;
    padding: 5px 0;
}

.detail-item.full-width {
    flex-basis: 100%;
}

.detail-title {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--primary-red);
    margin: 0 0 5px 0;
    display: inline-block;
    padding-bottom: 3px;
    border-bottom: 2px solid var(--accent-gold);
}

.detail-item p {
    margin: 0;
    line-height: 1.6;
    font-size: 0.95rem;
}

/* --- Hosts Section --- */
.hosts-section {
    margin-top: 25px;
}

.hosts-title {
    font-style: italic;
    font-size: 1.05rem;
    margin: 0;
    color: var(--text-medium);
}

.hosts-names {
    font-size: 1.3rem;
    font-weight: bold;
    color: var(--primary-red);
    margin: 5px 0 0 0;
}

/* --- Decorative Card Borders --- */
.card-border-top, .card-border-bottom {
    width: 80%;
    height: 10px;
    background: linear-gradient(to right, transparent, var(--accent-gold), var(--primary-red), var(--accent-gold), transparent);
    margin: 15px 0;
    border-radius: 5px;
    opacity: 0; /* Hidden initially */
}

.envelope-wrapper.content-visible .card-border-top {
    opacity: 1;
    transition: opacity 0.6s ease 0.1s;
}
.envelope-wrapper.content-visible .card-border-bottom {
    opacity: 1;
    transition: opacity 0.6s ease 1.6s; /* Appear after other content */
}


/* --- Responsive Adjustments --- */
@media (max-width: 400px) {
    .details-grid {
        flex-direction: column;
    }
}